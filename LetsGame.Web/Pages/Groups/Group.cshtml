@page "/group/{slug}"
@using LetsGame.Web.Services
@using System.Text.Encodings.Web
@inject UserManager<AppUser> UserManager;
@inject DateService DateService;
@model LetsGame.Web.Pages.Groups.GroupModel

@{
    Layout = "_AuthenticatedLayout";
}

<div class="d-flex justify-content-between align-items-center border-bottom mx-n3 px-3 mb-3">
    <h1 class="display-4">@Model.Group.Name</h1>

    @if (Model.IsGroupOwner)
    {
        <form method="post" asp-page-handler="delete">
            <button type="submit" class="btn btn-danger" onclick="return confirm('Delete @(JavaScriptEncoder.Default.Encode(@Model.Group.Name)) forever?')">Delete this group</button>
        </form>
    }
</div>

@if (!Model.Group.Games.Any())
{
    <h2>Welcome to your group!</h2>
    <p>The group does not have any game yet.</p>
    <p>You should add one by clicking <em>Add game</em> in the sidebar.</p>
}
else
{
    <partial name="_GroupUpcomingEvents"/>
    <partial name="_GroupProposedEvents"/>
}

@section Sidebar {
    <partial name="_GroupSidebar" />
}